# telegram_book_bot
Телеграм бот для книжного клуба
zТехническое задание на разработку Telegram бота для голосования в книжном клубе

Общая информация
Разрабатываемый Telegram бот будет использоваться для организации голосований по книгам в книжном клубе. Бот должен обеспечивать возможность добавления книг и проведения голосования среди участников клуба, при этом не мешая общению в чате.

Технологии и библиотеки
- aiogram: версия 2.25 для работы с Telegram API.
- Docker: для контейнеризации приложения.
- PostgreSQL: в качестве базы данных для хранения информации о книгах и голосах.
- Redis: для кэширования и управления сессиями.
- Python: версия 3.10.
- peewee-async: для работы с базой данных и миграциями.
- httpx: для выполнения веб-запросов (при необходимости).

Функциональные требования

Команды бота
1. /start
   - **Описание**: Запускает работу бота.
   - **Ответ**: "Привет! Используйте /new_book для добавления книги."

2. /new_book
   - Описание: Позволяет участникам клуба добавлять книги в список.
   - Формат ввода: Название и автор книги в формате "Название - Автор".
   - Правила: Команда обрабатывается только тем участником, который её вызвал. Пользователь может добавить только одну книгу для голосования.
   - Параллельный ввод: Бот должен корректно обрабатывать команды от нескольких пользователей одновременно. Каждый пользователь должен получать индивидуальный запрос на ввод данных, не мешая другим участникам чата.

3. /vote
   - Описание: Запускает голосование по всем ранее добавленным книгам.
   - Правила: Голосование открыто на три дня. Участник может проголосовать за одну или несколько книг, но только один раз.
   - Кнопка: "Проголосовать".

4. /result
   - Описание: Закрывает голосование и сообщает результаты.
   - Ответы:
     - "Победила книга: {Книга-Автор} с {n} голосом(ами)."
     - "Победили книги: {Книга-Автор} и {Книга-Автор} с {n} голосом(ами)."

5. /change_book (второй этап)
   - Описание: Позволяет пользователю изменить ранее добавленную книгу.
   - Правила: Если пользователь ввел книгу и команда /vote еще не была вызвана, он может поменять свою книгу на новую


Логика работы
- Бот должен хранить список книг и количество голосов за каждую книгу в базе данных PostgreSQL.
- При вызове команды `/vote` бот должен проверять, открыто ли голосование, и предоставлять пользователю список доступных книг для голосования.
- После закрытия голосования (по истечении трех дней или по команде `/result`), бот должен подсчитать голоса и определить победителей.
- Бот должен правильно определять, от какого пользователя поступила команда, и записывать его книгу, даже если другие пользователи одновременно вводят данные.



Третий этап
На третьем этапе необходимо доработать бота для получения голосования после обсуждения.

Команда
/rate_book
Описание: Запускает голосование для оценки книги.
Формат ввода: Бот автоматически использует название книги-победителя из последнего голосования. После этого бот предлагает участникам поставить оценку от 1 до 10.
Правила: Голосование открыто на три дня. Каждый участник может оценить книгу только один раз, поставив свою оценку.
Логика работы
Участник вызывает команду /rate_book.
Бот извлекает название книги, которая победила в предыдущем голосовании, и отправляет сообщение с просьбой оценить эту книгу, предоставляя кнопки с числами от 1 до 10.
Участники могут нажимать на кнопки для выбора своей оценки. Бот фиксирует оценки в базе данных.
По истечении трех дней или по команде /result_rating, бот завершает голосование и подсчитывает среднюю оценку книги.
Бот отправляет сообщение с результатами, например: "Средняя оценка книги {название} составила {средняя оценка} из 10."
Результаты
По истечении трех дней или по команде /result_rating, бот выдаст информацию о средней оценке книги.
Ответ бота будет включать среднюю оценку и количество участников, проголосовавших за книгу, например:
"Средняя оценка книги: {название} - {средняя оценка} (проголосовало {количество} участников)."







